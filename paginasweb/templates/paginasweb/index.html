{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solly - Conectando Solidariedade</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <!-- Custom CSS (mínimo necessário) -->
    <link href="{% static 'css/estilo.css' %}" rel="stylesheet">
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top shadow">
        <div class="container">
            <a class="navbar-brand fw-bold fs-4" href="#inicio">
                <i class="bi bi-heart-fill me-2"></i>Solly
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url "index" %}#inicio"><i class="bi bi-house-door-fill me-1"></i>Início</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url "index" %}#como-funciona"><i class="bi bi-info-circle-fill me-1"></i>Como Funciona</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'instituicoes-publicas' %}"><i class="bi bi-building me-1"></i>Instituições</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'historias-publicas' %}"><i class="bi bi-chat-left-text-fill me-1"></i>Histórias</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url "sobre" %}"><i class="bi bi-info-circle me-1"></i>Sobre</a>
                    </li>
                    
                    {% if user.is_authenticated %}
                    <!-- Menu de Doações (visível para usuários autenticados) -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="doacoesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-gift me-1"></i>Doações
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'cadastrar-doacao' %}">
                                <i class="bi bi-plus-circle me-2"></i>Registrar Doação
                            </a></li>
                            <li><a class="dropdown-item" href="{% url 'doacaoList' %}">
                                <i class="bi bi-list-ul me-2"></i>Minhas Doações
                            </a></li>
                        </ul>
                    </li>
                    
                    <!-- Menu de Histórias (visível para usuários autenticados) -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="historiasDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-chat-heart me-1"></i>Histórias
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'cadastrar-historia-inspiradora' %}">
                                <i class="bi bi-pencil-square me-2"></i>Compartilhar História
                            </a></li>
                            <li><a class="dropdown-item" href="{% url 'historias-inspiradorasList' %}">
                                <i class="bi bi-book me-2"></i>Minhas Histórias
                            </a></li>
                        </ul>
                    </li>
                    {% endif %}
                    
                    {% if user.is_superuser %}
                    <!-- Menu Administrativo (visível apenas para superusuários) -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle text-warning" href="#" id="adminDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-shield-fill-check me-1"></i>Admin
                        </a>
                        <ul class="dropdown-menu">
                            <li class="dropdown-header">Gerenciar Registros</li>
                            <li><a class="dropdown-item" href="{% url 'doadorList' %}">
                                <i class="bi bi-people me-2"></i>Doadores
                            </a></li>
                            <li><a class="dropdown-item" href="{% url 'instituicaoList' %}">
                                <i class="bi bi-building me-2"></i>Instituições
                            </a></li>
                            <li><a class="dropdown-item" href="{% url 'doacaoList' %}">
                                <i class="bi bi-gift me-2"></i>Doações
                            </a></li>
                            <li><a class="dropdown-item" href="{% url 'historias-inspiradorasList' %}">
                                <i class="bi bi-book me-2"></i>Histórias
                            </a></li>
                            <li><a class="dropdown-item" href="{% url 'statusList' %}">
                                <i class="bi bi-tags me-2"></i>Status
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="{% url 'admin:index' %}">
                                <i class="bi bi-gear-fill me-2"></i>Painel Django Admin
                            </a></li>
                        </ul>
                    </li>
                    {% endif %}
                </ul>
                
                <!-- User Menu / Login Buttons -->
                {% if user.is_authenticated %}
                <div class="dropdown">
                    <a class="btn btn-light dropdown-toggle" href="#" role="button" id="userDropdown" data-bs-toggle="dropdown">
                        <i class="bi bi-person-circle me-1"></i>{{ user.username }}
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#"><i class="bi bi-person me-2"></i>Meu Perfil</a></li>
                        <li><a class="dropdown-item" href="#"><i class="bi bi-gear me-2"></i>Configurações</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="{% url "sair" %}"><i class="bi bi-box-arrow-right me-2"></i>Sair</a></li>
                    </ul>
                </div>
                {% else %}
                <div class="d-flex gap-2">
                    <a href="{% url "login" %}" class="btn btn-light">
                        <i class="bi bi-box-arrow-in-right me-1"></i>Entrar
                    </a>
                    <div class="btn-group">
                        <button type="button" class="btn btn-outline-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-person-plus me-1"></i>Registrar
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url "registrar-doador" %}">
                                <i class="bi bi-heart me-2"></i>Como Doador
                            </a></li>
                            <li><a class="dropdown-item" href="{% url "registrar-instituicao" %}">
                                <i class="bi bi-building me-2"></i>Como Instituição
                            </a></li>
                        </ul>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="inicio" class="hero-section gradient-bg text-white">
        <div class="container d-flex align-items-center">
            <div class="row w-100 align-items-center">
                <div class="col-lg py-5 text-center">
                    <h1 class="display-6 fw-bold mb-4">Conectamos doadores a instituições que realmente precisam de ajuda</h1>
                    <p class="lead mb-4">Transforme vidas e comunidades através da solidariedade</p>
                    <div class="d-flex flex-wrap gap-3 align-items-center justify-content-center">
                        <a href="{% url 'registrar-doador' %}" class="btn btn-light btn-lg px-4">
                            <i class="bi bi-heart-fill me-2"></i>Cadastrar como Doador
                        </a>
                        <a href="{% url 'registrar-instituicao' %}" class="btn btn-outline-light btn-lg px-4">
                            <i class="bi bi-building me-2"></i>Cadastrar Instituição
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {% block conteudo %}
    <!-- Como Funciona -->
    <section id="como-funciona" class="py-5 bg-light">
        <div class="container py-5">
            <h2 class="display-5 fw-bold text-center mb-5">Como Funciona</h2>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card border-0 shadow-sm h-100 text-center p-4">
                        <div class="mb-3">
                            <div class="rounded-circle bg-success bg-opacity-10 d-inline-flex align-items-center justify-content-center" style="width: 80px; height: 80px;">
                                <i class="bi bi-person-plus-fill fs-1 text-success"></i>
                            </div>
                        </div>
                        <h4 class="fw-bold mb-3">1. Cadastre-se</h4>
                        <p class="text-muted">Faça seu cadastro como doador ou instituição em poucos minutos</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card border-0 shadow-sm h-100 text-center p-4">
                        <div class="mb-3">
                            <div class="rounded-circle bg-primary bg-opacity-10 d-inline-flex align-items-center justify-content-center" style="width: 80px; height: 80px;">
                                <i class="bi bi-search fs-1 text-primary"></i>
                            </div>
                        </div>
                        <h4 class="fw-bold mb-3">2. Encontre</h4>
                        <p class="text-muted">Encontre instituições que precisam da sua ajuda ou doadores dispostos a ajudar</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card border-0 shadow-sm h-100 text-center p-4">
                        <div class="mb-3">
                            <div class="rounded-circle bg-warning bg-opacity-10 d-inline-flex align-items-center justify-content-center" style="width: 80px; height: 80px;">
                                <i class="bi bi-gift-fill fs-1 text-warning"></i>
                            </div>
                        </div>
                        <h4 class="fw-bold mb-3">3. Doe</h4>
                        <p class="text-muted">Realize doações e acompanhe o impacto positivo que está causando</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Instituições em Destaque -->
    <section class="py-5" id="instituicoes">
        <div class="container py-5">
            <div class="d-flex justify-content-center align-items-center mb-5">
                <h2 class="display-5 fw-bold">Últimas Instituições Cadastradas</h2>
            </div>

            {% if ultimas_instituicoes %}
            <div class="row g-4">
                {% for instituicao in ultimas_instituicoes %}
                <div class="col-md-6 col-lg-4">
                    <div class="card institution-card border-0 shadow h-100">
                        <div class="text-center py-4 gradient-bg">
                            <i class="bi bi-building-fill text-white" style="font-size: 4rem;"></i>
                        </div>
                        <div class="card-body">
                            <span class="badge bg-primary mb-2">{{ instituicao.tipo }}</span>
                            <h5 class="card-title fw-bold">{{ instituicao.nome }}</h5>
                            <p class="card-text text-muted line-clamp-2">{{ instituicao.descricao }}</p>
                            <div class="mb-2">
                                <small class="text-muted">
                                    <i class="bi bi-geo-alt-fill me-1"></i>{{ instituicao.cidade }}
                                </small>
                            </div>
                            <div class="mb-2">
                                <small class="text-muted">
                                    <i class="bi bi-telephone-fill me-1"></i>{{ instituicao.telefone }}
                                </small>
                            </div>
                            
                            {% if user.is_superuser %}
                            <div class="d-flex gap-2 mt-3">
                                <a href="{% url 'editar-instituicao' instituicao.pk %}" class="btn btn-sm btn-outline-primary flex-grow-1">
                                    <i class="bi bi-pencil me-1"></i>Editar
                                </a>
                                <a href="{% url 'deletar-instituicao' instituicao.pk %}" class="btn btn-sm btn-outline-danger flex-grow-1">
                                    <i class="bi bi-trash me-1"></i>Excluir
                                </a>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="alert alert-info text-center">
                <i class="bi bi-info-circle fs-3 d-block mb-2"></i>
                <p class="mb-0">Ainda não há instituições cadastradas.</p>
            </div>
            {% endif %}

            <div class="text-center mt-5">
                <a href="{% url 'instituicoes-publicas' %}" class="btn btn-success btn-lg px-4">
                    <i class="bi bi-building me-2"></i>Ver Todas as Instituições
                </a>
            </div>
        </div>
    </section>

    <!-- Histórias Inspiradoras -->
    <section id="depoimentos" class="py-5 bg-light">
        <div class="container py-5">
            <h2 class="display-5 fw-bold text-center mb-5">Histórias de Transformação</h2>
            
            {% if ultimas_historias %}
            <div class="row g-4">
                {% for historia in ultimas_historias %}
                <div class="col-md-6 col-lg-4">
                    <div class="card story-card border-0 shadow h-100">
                        <div class="card-body p-4">
                            <div class="d-flex align-items-center mb-3">
                                <div class="rounded-circle bg-success bg-opacity-10 d-flex align-items-center justify-content-center me-3" style="width: 60px; height: 60px;">
                                    <i class="bi bi-chat-quote-fill fs-4 text-success"></i>
                                </div>
                                <div>
                                    <h6 class="mb-0 fw-bold">{{ historia.autor }}</h6>
                                    <small class="text-muted">{{ historia.data_postagem|date:"d/m/Y" }}</small>
                                </div>
                            </div>
                            <h5 class="fw-bold text-success mb-2">{{ historia.titulo }}</h5>
                            <p class="text-muted" style="max-height: 80px; overflow: hidden;">{{ historia.conteudo|truncatewords:20 }}</p>
                            
                            {% if historia.doador or historia.instituicao %}
                            <hr>
                            <small class="text-muted d-block">
                                {% if historia.doador %}
                                <i class="bi bi-heart me-1"></i>{{ historia.doador.nome }}
                                {% endif %}
                                {% if historia.instituicao %}
                                <i class="bi bi-building me-1"></i>{{ historia.instituicao.nome }}
                                {% endif %}
                            </small>
                            {% endif %}
                            
                            {% if user.is_superuser %}
                            <div class="d-flex gap-2 mt-3">
                                <a href="{% url 'editar-historia-inspiradora' historia.pk %}" class="btn btn-sm btn-outline-primary flex-grow-1">
                                    <i class="bi bi-pencil me-1"></i>Editar
                                </a>
                                <a href="{% url 'deletar-historia-inspiradora' historia.pk %}" class="btn btn-sm btn-outline-danger flex-grow-1">
                                    <i class="bi bi-trash me-1"></i>Excluir
                                </a>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
                
                <!-- CTA Card -->
                {% if user.is_authenticated %}
                <div class="col-md-6 col-lg-4">
                    <div class="card border-0 shadow h-100 gradient-bg text-white">
                        <div class="card-body p-4 d-flex flex-column justify-content-center text-center">
                            <i class="bi bi-chat-quote-fill fs-1 mb-3"></i>
                            <h5 class="fw-bold mb-3">Compartilhe Sua História</h5>
                            <p class="mb-4">Inspire outras pessoas com sua experiência de solidariedade</p>
                            <a href="{% url 'cadastrar-historia-inspiradora' %}" class="btn btn-light">
                                <i class="bi bi-plus-circle me-2"></i>Compartilhar História
                            </a>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
            {% else %}
            <div class="alert alert-info text-center">
                <i class="bi bi-info-circle fs-3 d-block mb-2"></i>
                <p class="mb-0">Ainda não há histórias compartilhadas. Seja o primeiro a inspirar!</p>
            </div>
            {% endif %}
            
            <div class="text-center mt-5">
                <a href="{% url 'historias-publicas' %}" class="btn btn-success btn-lg px-4">
                    <i class="bi bi-chat-heart me-2"></i>Ver Todas as Histórias
                </a>
            </div>
        </div>
    </section>

    <!-- Estatísticas -->
    <section class="py-5 gradient-bg text-white">
        <div class="container">
            <h2 class="display-6 fw-bold text-center mb-5">Nosso Impacto</h2>
            <div class="row text-center g-4">
                <div class="col-md-3 col-sm-6">
                    <div class="p-3">
                        <i class="bi bi-people-fill fs-1 mb-1"></i>
                        <h3 class="display-6 fw-bold">1,234</h3>
                        <p class="lead">Doadores Ativos</p>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="p-3">
                        <i class="bi bi-building fs-1 mb-1"></i>
                        <h3 class="display-6 fw-bold">567</h3>
                        <p class="lead">Instituições Cadastradas</p>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="p-3">
                        <i class="bi bi-gift-fill fs-1 mb-1"></i>
                        <h3 class="display-6 fw-bold">8,921</h3>
                        <p class="lead">Doações Realizadas</p>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="p-3">
                        <i class="bi bi-heart-fill fs-1 mb-1"></i>
                        <h3 class="display-6 fw-bold">R$ 2.5M</h3>
                        <p class="lead">Valor Arrecadado</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    {% endblock conteudo %}

    <!-- Footer -->
    <footer class="bg-dark text-white py-5">
        <div class="container">
            <div class="row g-4">
                <div class="col-lg-4 col-md-6">
                    <h5 class="fw-bold mb-3">
                        <i class="bi bi-heart-fill me-2"></i>Solly
                    </h5>
                    <p class="text-white-50">Conectando doadores a instituições que transformam vidas e comunidades através da solidariedade.</p>
                    <div class="d-flex gap-2 mt-3">
                        <a href="#" class="btn btn-primary social-icon d-flex align-items-center justify-content-center">
                            <i class="bi bi-facebook"></i>
                        </a>
                        <a href="#" class="btn btn-info social-icon d-flex align-items-center justify-content-center">
                            <i class="bi bi-twitter"></i>
                        </a>
                        <a href="#" class="btn btn-danger social-icon d-flex align-items-center justify-content-center">
                            <i class="bi bi-instagram"></i>
                        </a>
                        <a href="#" class="btn btn-success social-icon d-flex align-items-center justify-content-center">
                            <i class="bi bi-whatsapp"></i>
                        </a>
                    </div>
                </div>
                
                <div class="col-lg-2 col-md-6">
                    <h6 class="fw-bold mb-3">Links Rápidos</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="{% url 'index' %}" class="text-white-50 text-decoration-none">Início</a></li>
                        <li class="mb-2"><a href="{% url 'index' %}#como-funciona" class="text-white-50 text-decoration-none">Como Funciona</a></li>
                        <li class="mb-2"><a href="{% url 'instituicoes-publicas' %}" class="text-white-50 text-decoration-none">Instituições</a></li>
                        <li class="mb-2"><a href="{% url 'historias-publicas' %}" class="text-white-50 text-decoration-none">Histórias</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-3 col-md-6">
                    <h6 class="fw-bold mb-3">Para Instituições</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none">Cadastre sua Instituição</a></li>
                        <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none">Como Receber Doações</a></li>
                        <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none">Requisitos</a></li>
                        <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none">FAQ</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-3 col-md-6">
                    <h6 class="fw-bold mb-3">Newsletter</h6>
                    <p class="text-white-50 small">Receba novidades sobre projetos e histórias inspiradoras.</p>
                    <form class="mt-3">
                        <div class="input-group">
                            <input type="email" class="form-control" placeholder="Seu email">
                            <button class="btn btn-success" type="submit">
                                <i class="bi bi-send-fill"></i>
                            </button>
                        </div>
                    </form>
                </div>

            </div>
            
            <hr class="my-4 bg-white opacity-25">
            
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start">
                    <p class="mb-0 text-white-50 small">&copy; 2025 Solly. Todos os direitos reservados.</p>
                </div>
                <div class="col-md-6 text-center text-md-end mt-3 mt-md-0">
                    <a href="#" class="text-white-50 text-decoration-none small me-3">Política de Privacidade</a>
                    <a href="#" class="text-white-50 text-decoration-none small">Termos de Uso</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5 JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script>
        $(document).ready(function() {
            // Exemplo: Ativar tooltips do Bootstrap
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl)
            })
        });

    </script>

    {% block script %}{% endblock script %}
</body>
</html>
